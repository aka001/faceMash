{{extend 'layout.html'}}

{{if(isAuthorized):}}

{{if(perID):}}

<!--  Individual Mash Listing Starts here -->
<h2>{{=row.name}}</h2>
<p><i>
{{=row.description}}
</i></p>
<p>Total Number of Images in the Mash : {{=row.num_of_images}}</p>
<b> Mash Public URL </b> : {{=A("Click Here",_href=URL("YourMash","index",args=mash_id , scheme=True, host=True))}}<br/>
<b> Mash Ranklist Public URL </b> :
{{=A("Click Here",_href=URL("YourMash","rankList",args=mash_id, scheme=True, host=True))}}<br/>
<br/>

<!-- {{=A("Add an Image to this Mash", _href=URL("face","create",args=mash_id))}}-->

<script type='text/javascript'>
$(document).ready(function(){
$.get('{{=URL("face","create",args=mash_id)}}', function(data){
  console.log(data);
  $("#AddImageBox").append(data);
});
});
</script>
<div id="AddImageBox">
<h5>Add Image to the Mash</h5>

</div>

<br/>

<table>
  {{rank = 1}}

  {{if len(childFaces)==0:}}
  <i> Sorry there are no Faces to Mash Yet :( </i>
  {{pass}}
  
{{for row in childFaces :}}
   <tr>

     <td><img image_id="{{=row.id}}"  src="{{=URL('download',args=row.image)}}"/></td>
     <td> <b>{{=row.name}}</b><br/>
       <b>Won :</b> {{=row.won}}<br/>
       <b>Lost :</b> {{=row.lost}}<br/>
       <b>Rating :</b> {{=row.elo_rating}}<br/>
       <b>Rank : </b> {{=rank}}{{rank+=1}}<br/>
     </td>
     <td><button>{{=A("Delete",_href=URL("face","/delete/"+request.args[0]+"/"+str(row.id))) }}</button></td>
      
     </tr>
{{pass}}
     </table>

     

<!--Individual Mash listing Ends here -->
{{else:}}

     
     
{{=H4(T("Mashes You Own"))}} {{=BR()}}
{{if len(rows)==0:}}
     Doesnot Look like you have Created any mashes yet...
{{pass}}
<br/>

      {{  }}

<br/>
<ul>
{{for row in rows:}}
{{=LI(B(A(row.name+" ("+str(row.num_of_images)+")",  _href=URL(request.controller,"/list/"+str(row.id)))))}}
  <ul><li>
    {{=I(row.description)}}
  </ul></li>
{{pass}}
</ul>
{{pass}}


{{else:}}
You are not authorized to View this Page
{{pass}}
<br/>
<br/>